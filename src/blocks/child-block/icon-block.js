import { registerBlockType } from '@wordpress/blocks';
import { __ } from '@wordpress/i18n';
import {
	Popover,
	ButtonGroup,
	Button,
	TextControl,
} from '@wordpress/components';

import { Fragment } from '@wordpress/element';

const icons = {
	facebook: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 10h-2v2h2v6h3v-6h1.82l.18-2h-2v-.833c0-.478.096-.667.558-.667h1.442v-2.5h-2.404c-1.798 0-2.596.792-2.596 2.308v1.692z" />
		</svg>
	),
	twitter: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.5 8.778c-.441.196-.916.328-1.414.388.509-.305.898-.787 1.083-1.362-.476.282-1.003.487-1.564.597-.448-.479-1.089-.778-1.796-.778-1.59 0-2.758 1.483-2.399 3.023-2.045-.103-3.86-1.083-5.074-2.572-.645 1.106-.334 2.554.762 3.287-.403-.013-.782-.124-1.114-.308-.027 1.14.791 2.207 1.975 2.445-.346.094-.726.116-1.112.042.313.978 1.224 1.689 2.3 1.709-1.037.812-2.34 1.175-3.647 1.021 1.09.699 2.383 1.106 3.773 1.106 4.572 0 7.154-3.861 6.998-7.324.482-.346.899-.78 1.229-1.274z" />
		</svg>
	),
	instagram: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 7.082c1.602 0 1.792.006 2.425.035 1.627.074 2.385.845 2.46 2.459.028.633.034.822.034 2.424s-.006 1.792-.034 2.424c-.075 1.613-.832 2.386-2.46 2.46-.633.028-.822.035-2.425.035-1.602 0-1.792-.006-2.424-.035-1.63-.075-2.385-.849-2.46-2.46-.028-.632-.035-.822-.035-2.424s.007-1.792.035-2.424c.074-1.615.832-2.386 2.46-2.46.632-.029.822-.034 2.424-.034zm0-1.082c-1.63 0-1.833.007-2.474.037-2.18.1-3.39 1.309-3.49 3.489-.029.641-.036.845-.036 2.474 0 1.63.007 1.834.036 2.474.1 2.179 1.31 3.39 3.49 3.49.641.029.844.036 2.474.036 1.63 0 1.834-.007 2.475-.036 2.176-.1 3.391-1.309 3.489-3.49.029-.64.036-.844.036-2.474 0-1.629-.007-1.833-.036-2.474-.098-2.177-1.309-3.39-3.489-3.489-.641-.03-.845-.037-2.475-.037zm0 2.919c-1.701 0-3.081 1.379-3.081 3.081s1.38 3.081 3.081 3.081 3.081-1.379 3.081-3.081c0-1.701-1.38-3.081-3.081-3.081zm0 5.081c-1.105 0-2-.895-2-2 0-1.104.895-2 2-2 1.104 0 2.001.895 2.001 2s-.897 2-2.001 2zm3.202-5.922c-.397 0-.72.322-.72.72 0 .397.322.72.72.72.398 0 .721-.322.721-.72 0-.398-.322-.72-.721-.72z" />
		</svg>
	),
	linkedin: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 8c0 .557-.447 1.008-1 1.008s-1-.45-1-1.008c0-.557.447-1.008 1-1.008s1 .452 1 1.008zm0 2h-2v6h2v-6zm3 0h-2v6h2v-2.861c0-1.722 2.002-1.881 2.002 0v2.861h1.998v-3.359c0-3.284-3.128-3.164-4-1.548v-1.093z" />
		</svg>
	),
	pinterest: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 6c-3.313 0-6 2.686-6 6 0 2.542 1.581 4.712 3.812 5.587-.052-.475-.1-1.203.022-1.721.108-.468.703-2.982.703-2.982s-.181-.359-.181-.891c0-.834.485-1.457 1.087-1.457.512 0 .759.385.759.845 0 .516-.328 1.285-.497 1.998-.142.598.3 1.084.889 1.084 1.066 0 1.887-1.124 1.887-2.747 0-1.437-1.032-2.441-2.507-2.441-1.707 0-2.709 1.28-2.709 2.604 0 .516.199 1.068.446 1.368.049.06.056.112.041.173l-.165.68c-.027.11-.088.134-.201.081-.75-.349-1.219-1.444-1.219-2.325 0-1.893 1.375-3.63 3.964-3.63 2.082 0 3.7 1.482 3.7 3.465 0 2.068-1.304 3.732-3.114 3.732-.608 0-1.179-.315-1.375-.689l-.374 1.426c-.135.521-.501 1.175-.746 1.573.562.173 1.16.267 1.778.267 3.313 0 6-2.687 6-6 0-3.314-2.687-6-6-6z" />
		</svg>
	),
	youtube: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M16.23 7.102c-2.002-.136-6.462-.135-8.461 0-2.165.148-2.419 1.456-2.436 4.898.017 3.436.27 4.75 2.437 4.898 1.999.135 6.459.136 8.461 0 2.165-.148 2.42-1.457 2.437-4.898-.018-3.436-.271-4.75-2.438-4.898zm-6.23 7.12v-4.444l4.778 2.218-4.778 2.226zm2-12.222c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12z" />
		</svg>
	),
	vimeo: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.436 11.84c-1.22 2.608-4.167 6.16-6.03 6.16-1.837 0-2.103-3.916-3.106-6.522-.492-1.282-.81-.988-1.734-.34l-.566-.728c1.35-1.186 2.698-2.563 3.529-2.64.933-.09 1.508.548 1.724 1.916.284 1.797.681 4.585 1.374 4.585.539 0 1.871-2.212 1.938-3.003.121-1.159-.852-1.193-1.695-.832 1.336-4.377 6.897-3.571 4.566 1.404z" />
		</svg>
	),
	email: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2.02c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 12.55l-5.992-4.57h11.983l-5.991 4.57zm0 1.288l-6-4.629v6.771h12v-6.771l-6 4.629z" />
		</svg>
	),
	skype: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.494 12.983c.679-3.882-2.708-7.206-6.527-6.49-2.91-1.78-6.251 1.614-4.466 4.515-.694 3.873 2.69 7.24 6.541 6.504 2.916 1.769 6.246-1.629 4.452-4.529zm-5.302 2.945c-1.59 0-3.189-.724-3.181-1.97.002-.376.281-.721.653-.721.938 0 .929 1.397 2.42 1.397 1.046 0 1.403-.573 1.403-.972 0-1.443-4.521-.56-4.521-3.272 0-1.468 1.201-2.481 3.089-2.37 1.801.106 2.856.902 2.959 1.645.05.485-.271.863-.83.863-.814 0-.897-1.09-2.3-1.09-.633 0-1.167.264-1.167.837 0 1.197 4.495.502 4.495 3.138.001 1.519-1.211 2.515-3.02 2.515z" />
		</svg>
	),
	telegram: (
		<svg
			width="24px"
			height="24px"
			version="1.1"
			style={{
				fillRule: 'evenodd',
				clipRule: 'evenodd',
				strokeLinejoin: 'round',
				strokeMiterlimit: 1.41421,
			}}
		>
			<path
				id="telegram-5"
				d="M12,0c-6.627,0 -12,5.373 -12,12c0,6.627 5.373,12 12,12c6.627,0 12,-5.373 12,-12c0,-6.627 -5.373,-12 -12,-12Zm0,2c5.514,0 10,4.486 10,10c0,5.514 -4.486,10 -10,10c-5.514,0 -10,-4.486 -10,-10c0,-5.514 4.486,-10 10,-10Zm2.692,14.889c0.161,0.115 0.368,0.143 0.553,0.073c0.185,-0.07 0.322,-0.228 0.362,-0.42c0.435,-2.042 1.489,-7.211 1.884,-9.068c0.03,-0.14 -0.019,-0.285 -0.129,-0.379c-0.11,-0.093 -0.263,-0.12 -0.399,-0.07c-2.096,0.776 -8.553,3.198 -11.192,4.175c-0.168,0.062 -0.277,0.223 -0.271,0.4c0.006,0.177 0.125,0.33 0.296,0.381c1.184,0.354 2.738,0.847 2.738,0.847c0,0 0.725,2.193 1.104,3.308c0.047,0.139 0.157,0.25 0.301,0.287c0.145,0.038 0.298,-0.001 0.406,-0.103c0.608,-0.574 1.548,-1.461 1.548,-1.461c0,0 1.786,1.309 2.799,2.03Zm-5.505,-4.338l0.84,2.769l0.186,-1.754c0,0 3.243,-2.925 5.092,-4.593c0.055,-0.048 0.062,-0.13 0.017,-0.188c-0.045,-0.057 -0.126,-0.071 -0.188,-0.032c-2.143,1.368 -5.947,3.798 -5.947,3.798Z"
			/>
		</svg>
	),
	wordpress: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-4.702 9.905l2.456 6.728c-1.718-.835-2.901-2.595-2.901-4.633 0-.746.161-1.455.445-2.095zm8.177 1.836c0-.637-.229-1.077-.425-1.42-.26-.424-.505-.783-.505-1.208 0-.489.373-.94.932-.909-.916-.839-2.137-1.351-3.477-1.351-1.798 0-3.38.922-4.301 2.319.313.011.745.017 1.703-.059.277-.016.31.392.034.424 0 0-.28.032-.591.049l1.875 5.575 1.127-3.378-.802-2.197-.54-.049c-.278-.017-.244-.44.032-.424 1.106.085 1.635.086 2.728 0 .278-.016.311.392.032.424 0 0-.278.032-.588.049l1.859 5.532.515-1.715c.223-.711.392-1.223.392-1.662zm-3.384.709l-1.545 4.488c.461.135.948.209 1.454.209.6 0 1.175-.104 1.709-.291-.042-.07-1.59-4.329-1.618-4.406zm4.426-2.919c.112.825-.049 1.604-.356 2.373l-1.573 4.545c1.53-.892 2.561-2.55 2.561-4.449-.002-.895-.23-1.736-.632-2.469zm1.483 2.469c0 3.309-2.692 6-6 6s-6-2.691-6-6 2.692-6 6-6 6 2.691 6 6zm-.275 0c0-3.156-2.568-5.725-5.725-5.725s-5.725 2.568-5.725 5.725c0 3.157 2.568 5.726 5.725 5.726s5.725-2.569 5.725-5.726z" />
		</svg>
	),
	github: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 6c-3.313 0-6 2.686-6 6 0 2.651 1.719 4.9 4.104 5.693.3.056.396-.13.396-.289v-1.117c-1.669.363-2.017-.707-2.017-.707-.272-.693-.666-.878-.666-.878-.544-.373.041-.365.041-.365.603.042.92.619.92.619.535.917 1.403.652 1.746.499.054-.388.209-.652.381-.802-1.333-.152-2.733-.667-2.733-2.965 0-.655.234-1.19.618-1.61-.062-.153-.268-.764.058-1.59 0 0 .504-.161 1.65.615.479-.133.992-.199 1.502-.202.51.002 1.023.069 1.503.202 1.146-.776 1.648-.615 1.648-.615.327.826.121 1.437.06 1.588.385.42.617.955.617 1.61 0 2.305-1.404 2.812-2.74 2.96.216.186.412.551.412 1.111v1.646c0 .16.096.347.4.288 2.383-.793 4.1-3.041 4.1-5.691 0-3.314-2.687-6-6-6z" />
		</svg>
	),
	reddit: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 11.889c0-.729-.596-1.323-1.329-1.323-.358 0-.681.143-.92.373-.905-.595-2.13-.975-3.485-1.023l.742-2.334 2.008.471-.003.029c0 .596.487 1.082 1.087 1.082.599 0 1.086-.485 1.086-1.082s-.488-1.082-1.087-1.082c-.46 0-.852.287-1.01.69l-2.164-.507c-.094-.023-.191.032-.22.124l-.827 2.603c-1.419.017-2.705.399-3.65 1.012-.237-.219-.552-.356-.9-.356-.732.001-1.328.594-1.328 1.323 0 .485.267.905.659 1.136-.026.141-.043.283-.043.429-.001 1.955 2.404 3.546 5.359 3.546 2.956 0 5.36-1.591 5.36-3.546 0-.137-.015-.272-.038-.405.416-.224.703-.657.703-1.16zm-8.612.908c0-.434.355-.788.791-.788.436 0 .79.353.79.788 0 .434-.355.787-.79.787-.436.001-.791-.352-.791-.787zm4.53 2.335c-.398.396-1.024.589-1.912.589l-.007-.001-.007.001c-.888 0-1.514-.193-1.912-.589-.073-.072-.073-.19 0-.262.072-.072.191-.072.263 0 .325.323.864.481 1.649.481l.007.001.007-.001c.784 0 1.324-.157 1.649-.481.073-.072.19-.072.263 0 .073.072.073.19 0 .262zm-.094-1.547c-.436 0-.79-.353-.79-.787 0-.434.355-.788.79-.788.436 0 .79.353.79.788 0 .434-.354.787-.79.787z" />
		</svg>
	),
	whatsapp: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-5.971 18l.844-3.081c-.52-.902-.794-1.925-.794-2.973.001-3.279 2.668-5.946 5.946-5.946 1.591.001 3.084.62 4.206 1.744 1.123 1.124 1.741 2.618 1.74 4.207-.001 3.279-2.669 5.946-5.946 5.946-.995 0-1.976-.25-2.844-.724l-3.152.827zm3.298-1.903c.838.497 1.638.796 2.696.796 2.724 0 4.943-2.217 4.944-4.942.001-2.731-2.208-4.945-4.94-4.946-2.726 0-4.943 2.217-4.944 4.942 0 1.112.326 1.946.873 2.817l-.499 1.824 1.87-.491zm5.694-2.732c-.037-.062-.136-.099-.285-.174-.149-.074-.879-.434-1.015-.483-.136-.05-.235-.074-.334.074-.099.149-.384.483-.47.583-.087.099-.173.112-.322.037-.149-.074-.627-.231-1.195-.737-.442-.394-.74-.881-.827-1.029-.087-.149-.009-.229.065-.303l.223-.26.149-.248c.05-.099.025-.186-.012-.26l-.458-1.103c-.121-.29-.243-.25-.334-.255l-.286-.007c-.099 0-.26.037-.396.186s-.52.508-.52 1.24c0 .731.532 1.438.607 1.537.074.099 1.048 1.6 2.538 2.243.354.153.631.245.847.313.356.113.68.097.936.059.285-.043.879-.359 1.003-.706.123-.348.123-.645.086-.707z" />
		</svg>
	),
	behance: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M18 8.101h-4v-.875h4v.875zm.84 6.125c-.77 2.258-5.949 2.966-5.949-1.56 0-4.583 5.508-4.377 6.053-.872.045.295.062.693.055 1.249h-4.41c-.104 1.715 1.76 1.932 2.404 1.184h1.847zm-4.211-2.333h2.624c-.115-1.687-2.36-1.81-2.624 0zm-5.858 4.076h-3.771v-8.73h4.056c3.194.047 3.255 3.176 1.587 4.028 2.019.735 2.086 4.702-1.872 4.702zm-1.896-5.134h1.965c1.464 0 1.696-1.859-.182-1.859h-1.783v1.859zm1.854 1.454h-1.854v1.947h1.824c1.782-.001 1.673-1.947.03-1.947zm3.271-10.289c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12z" />
		</svg>
	),
	dribble: (
		<svg width="24" height="24" viewBox="0 0 24 24">
			<path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 6c-3.313 0-6 2.686-6 6 0 3.313 2.687 6 6 6s6-2.687 6-6c0-3.314-2.687-6-6-6zm4.942 5.72c-1.288-.211-2.472-.223-3.551-.036-.123-.282-.249-.562-.384-.84 1.154-.5 2.083-1.18 2.774-2.041.675.797 1.098 1.81 1.161 2.917zm-1.921-3.64c-.604.777-1.434 1.391-2.492 1.84-.509-.93-1.09-1.838-1.745-2.719.39-.099.796-.158 1.216-.158 1.139 0 2.184.39 3.021 1.037zm-5.257-.497c.666.871 1.255 1.769 1.77 2.69-1.217.357-2.666.542-4.344.554.347-1.418 1.3-2.598 2.574-3.244zm-2.721 4.417l.008-.127c1.923-.003 3.584-.225 4.975-.662.117.237.229.477.335.716-1.69.529-3.083 1.611-4.169 3.24-.717-.86-1.149-1.964-1.149-3.167zm1.914 3.905c.984-1.544 2.242-2.549 3.801-3.013.463 1.21.804 2.455 1.021 3.73-1.675.645-3.476.333-4.822-.717zm5.794.215c-.218-1.177-.54-2.327-.96-3.449.938-.132 1.971-.098 3.1.098-.219 1.394-1.015 2.597-2.14 3.351z" />
		</svg>
	),
};

/**
 * Social Icons Block
 */

registerBlockType('bcb/icon', {
	title: __('Social Icon', 'advanced-team-blocks'),
	description: __('Single social icon', 'advanced-team-blocks'),
	category: 'atgb-blocks',
	icon: {
		foreground: '#4f4f7c',
		src: 'share',
	},
	parent: ['bcb/team-member'],
	attributes: {
		icon: {
			type: 'string',
			default: 'facebook',
		},
		url: {
			type: 'string',
			default: '#',
		},
		popover: {
			type: 'boolean',
			default: false,
		},
		urlPopover: {
			type: 'boolean',
			default: false,
		},
	},
	edit: ({ attributes, setAttributes, className }) => {
		const { icon, url, popover, urlPopover } = attributes;
		return (
			<Fragment>
				<div className="afgb__icons_wrapper">
					<button
						className={className}
						onClick={() =>
							setAttributes({
								popover: true,
							})
						}
					>
						{icons[icon]}
					</button>
					{popover && (
						<Popover
							position="bottom right"
							onFocusOutside={() =>
								setAttributes({
									popover: false,
								})
							}
							animate={true}
						>
							<div className="afgb__icons">
								<ButtonGroup>
									{Object.keys(icons).map((item, index) => (
										<Button
											isPrimary={item === icon}
											onClick={() =>
												setAttributes({
													icon: item,
													popover: false,
													urlPopover: true,
												})
											}
											key={index}
										>
											{icons[item]}
										</Button>
									))}
								</ButtonGroup>
							</div>
						</Popover>
					)}
					{urlPopover && (
						<Popover
							position="bottom right"
							onFocusOutside={() =>
								setAttributes({
									urlPopover: false,
								})
							}
						>
							<div className="afgb__icon_url">
								<TextControl
									label={__(
										'Icon Link',
										'advanced-team-blocks'
									)}
									value={url}
									onChange={(value) =>
										setAttributes({
											url: value,
										})
									}
									placeholder={__(
										'https://link.com',
										'advanced-team-blocks'
									)}
								/>
								<div className="afgb__apply_btn">
									<Button
										isPrimary
										isSmall
										onClick={() =>
											setAttributes({
												urlPopover: false,
											})
										}
									>
										{__('Add Link', 'advanced-team-blocks')}
									</Button>
								</div>
							</div>
						</Popover>
					)}
				</div>
			</Fragment>
		);
	},
	save: ({ attributes }) => {
		const { icon, url } = attributes;
		return (
			<a href={url} target="_blank" rel="noreferrer noopener">
				{icons[icon]}
			</a>
		);
	},
});
